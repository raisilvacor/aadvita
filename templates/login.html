{% extends "base.html" %}

{% block content %}
<section class="section" id="login">
    <div class="container">
        <div class="section-header">
            <h1 class="section-title">{{ _('Entrar') }}</h1>
            <p class="section-subtitle">{{ _('Acesse sua conta ou √°rea administrativa') }}</p>
        </div>
        
        <div class="login-container">
            <div class="login-tabs">
                <button class="login-tab active" data-tab="associado">{{ _('Associado') }}</button>
                <button class="login-tab" data-tab="admin">{{ _('Administrador') }}</button>
            </div>
            
            <!-- Formul√°rio de Login de Associado -->
            <div class="login-form-container active" id="form-associado">
                <form method="POST" class="associate-form">
                    <input type="hidden" name="tipo" value="associado">
                    <div class="form-group">
                        <label for="cpf">CPF *</label>
                        <input type="text" id="cpf" name="cpf" 
                               placeholder="000.000.000-00" required
                               maxlength="14"
                               aria-required="true">
                        <small class="form-help">{{ _('Digite seu CPF cadastrado') }}</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="senha">{{ _('Senha') }} *</label>
                        <input type="password" id="senha" name="senha" 
                               placeholder="{{ _('Digite sua senha') }}" required
                               aria-required="true">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            {{ _('Entrar') }}
                        </button>
                        <a href="{{ url_for('associe_se') }}" class="btn btn-secondary">
                            {{ _('N√£o tem conta? Associe-se') }}
                        </a>
                    </div>
                </form>
            </div>
            
            <!-- Link para Admin -->
            <div class="login-form-container" id="form-admin" style="display: none;">
                <div class="login-options">
                    <a href="{{ url_for('admin_login') }}" class="login-option-card">
                        <div class="login-icon">üîê</div>
                        <h3>{{ _('√Årea Administrativa') }}</h3>
                        <p>{{ _('Acesso para administradores do sistema') }}</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// M√°scara para CPF no login
document.addEventListener('DOMContentLoaded', function() {
    const cpfInput = document.getElementById('cpf');
    if (cpfInput) {
        cpfInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                e.target.value = value;
            }
        });
    }
    
    // Tabs de login
    const tabs = document.querySelectorAll('.login-tab');
    const forms = document.querySelectorAll('.login-form-container');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.dataset.tab;
            
            // Remove active de todas as tabs e forms
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => {
                f.classList.remove('active');
                f.style.display = 'none';
            });
            
            // Adiciona active na tab clicada
            this.classList.add('active');
            
            // Mostra o form correspondente
            const formId = `form-${tabId}`;
            const form = document.getElementById(formId);
            if (form) {
                form.classList.add('active');
                form.style.display = 'block';
            }
        });
    });
});
</script>
{% endblock %}

