{% extends "base.html" %}

{% block content %}
<section class="section" id="login">
    <div class="container">
        <div class="section-header">
            <h1 class="section-title">{{ _('Entrar') }}</h1>
            <p class="section-subtitle">{{ _('Acesse sua conta ou 치rea administrativa') }}</p>
        </div>
        
        <div class="login-container">
            <div class="login-tabs">
                <button class="login-tab active" data-tab="associado">{{ _('Associado') }}</button>
                <button class="login-tab" data-tab="admin">{{ _('Administrador') }}</button>
                <button class="login-tab" data-tab="voluntario">{{ _('Volunt치rio') }}</button>
            </div>
            
            <!-- Formul치rio de Login de Associado -->
            <div class="login-form-container active" id="form-associado">
                <form method="POST" class="associate-form">
                    <input type="hidden" name="tipo" value="associado">
                    <div class="form-group">
                        <label for="cpf">CPF *</label>
                        <input type="text" id="cpf" name="cpf" 
                               placeholder="000.000.000-00" required
                               maxlength="14"
                               aria-required="true">
                        <small class="form-help">{{ _('Digite seu CPF cadastrado') }}</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="senha">{{ _('Senha') }} *</label>
                        <input type="password" id="senha" name="senha" 
                               placeholder="{{ _('Digite sua senha') }}" required
                               aria-required="true">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            {{ _('Entrar') }}
                        </button>
                        <a href="{{ url_for('associe_se') }}" class="btn btn-secondary">
                            {{ _('N칚o tem conta? Associe-se') }}
                        </a>
                    </div>
                </form>
            </div>
            
            <!-- Link para Admin -->
            <div class="login-form-container" id="form-admin" style="display: none;">
                <div class="login-options">
                    <a href="{{ url_for('admin_login') }}" class="login-option-card">
                        <div class="login-icon">游댏</div>
                        <h3>{{ _('츼rea Administrativa') }}</h3>
                        <p>{{ _('Acesso para administradores do sistema') }}</p>
                    </a>
                </div>
            </div>

            <!-- Login Volunt치rio -->
            <div class="login-form-container" id="form-voluntario" style="display: none;">
                <!-- Usar a mesma classe de formul치rio do associado para herdar estilos (altura, padding, borda) -->
                <form method="POST" class="associate-form">
                    <input type="hidden" name="tipo" value="voluntario">
                    <div class="form-group">
                        <label for="vol_cpf">CPF *</label>
                        <input type="text" id="vol_cpf" name="cpf" placeholder="000.000.000-00" required maxlength="14" aria-required="true">
                        <small class="form-help">{{ _('Digite seu CPF cadastrado') }}</small>
                    </div>
                    <div class="form-group">
                        <label for="vol_senha">{{ _('Senha') }} *</label>
                        <input type="password" id="vol_senha" name="senha" placeholder="{{ _('Digite sua senha') }}" required aria-required="true">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">{{ _('Entrar') }}</button>
                        <a href="{{ url_for('voluntario_cadastro') }}" class="btn btn-secondary">{{ _('Ainda n칚o sou volunt치rio') }}</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<script>
// M치scara para CPF no login
document.addEventListener('DOMContentLoaded', function() {
    // Aplicar m치scara de CPF para os campos de CPF (associado e volunt치rio)
    ['cpf','vol_cpf'].forEach(function(id) {
        const input = document.getElementById(id);
        if (!input) return;
        input.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                e.target.value = value;
            }
        });
    });
    
    // Tabs de login
    const tabs = document.querySelectorAll('.login-tab');
    const forms = document.querySelectorAll('.login-form-container');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.dataset.tab;
            
            // Remove active de todas as tabs e forms
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => {
                f.classList.remove('active');
                f.style.display = 'none';
            });
            
            // Adiciona active na tab clicada
            this.classList.add('active');
            
            // Mostra o form correspondente
            const formId = `form-${tabId}`;
            const form = document.getElementById(formId);
            if (form) {
                form.classList.add('active');
                form.style.display = 'block';
            }
        });
    });
});
</script>
{% endblock %}

