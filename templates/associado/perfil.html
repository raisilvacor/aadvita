{% extends "associado/base.html" %}

{% block title %}Meu Perfil{% endblock %}

{% block content %}
<div class="admin-card">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Meu Perfil</h2>
    </div>
    
    <form method="POST" class="admin-form">
        <div class="form-group">
            <label for="nome_completo">Nome Completo *</label>
            <input type="text" id="nome_completo" name="nome_completo" 
                   value="{{ associado.nome_completo }}" required>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" id="cpf" name="cpf" 
                       value="{{ associado.cpf }}" 
                       placeholder="000.000.000-00" 
                       readonly
                       style="background-color: var(--bg-lighter);">
                <small style="color: var(--text-light);">CPF n√£o pode ser alterado</small>
            </div>
            
            <div class="form-group">
                <label for="data_nascimento">Data de Nascimento *</label>
                <input type="date" id="data_nascimento" name="data_nascimento" 
                       value="{{ associado.data_nascimento.strftime('%Y-%m-%d') }}" required>
            </div>
        </div>
        
        <div class="form-group">
            <label for="endereco">Endere√ßo *</label>
            <textarea id="endereco" name="endereco" rows="3" required>{{ associado.endereco }}</textarea>
            <small style="color: var(--text-light);">Rua, n√∫mero, bairro, cidade - CEP</small>
        </div>
        
        <div class="form-group">
            <label for="telefone">Telefone *</label>
            <input type="text" id="telefone" name="telefone" 
                   value="{{ associado.telefone }}" 
                   placeholder="(00) 00000-0000" required
                   maxlength="20">
            <small style="color: var(--text-light);">Formato: (00) 00000-0000</small>
        </div>
        
        <div class="form-divider">
            <h3>Alterar Senha</h3>
            <p class="form-help">Deixe em branco se n√£o quiser alterar a senha</p>
        </div>
        
        <div class="form-group">
            <label for="senha_atual">Senha Atual</label>
            <input type="password" id="senha_atual" name="senha_atual" 
                   placeholder="Digite sua senha atual">
        </div>
        
        <div class="form-group">
            <label for="senha">Nova Senha</label>
            <input type="password" id="senha" name="senha" 
                   placeholder="M√≠nimo 6 caracteres"
                   minlength="6">
            <small style="color: var(--text-light);">A senha deve ter no m√≠nimo 6 caracteres</small>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn-admin btn-admin-primary">
                <span>üíæ</span> Salvar Altera√ß√µes
            </button>
            <a href="{{ url_for('associado_dashboard') }}" class="btn-admin btn-admin-secondary">
                <span>‚Ü©Ô∏è</span> Voltar
            </a>
        </div>
    </form>
</div>

<script>
// M√°scara para CPF
document.addEventListener('DOMContentLoaded', function() {
    const cpfInput = document.getElementById('cpf');
    if (cpfInput) {
        cpfInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                e.target.value = value;
            }
        });
    }
    
    // M√°scara para telefone
    const telefoneInput = document.getElementById('telefone');
    if (telefoneInput) {
        telefoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                if (value.length <= 10) {
                    value = value.replace(/(\d{2})(\d)/, '($1) $2');
                    value = value.replace(/(\d{4})(\d)/, '$1-$2');
                } else {
                    value = value.replace(/(\d{2})(\d)/, '($1) $2');
                    value = value.replace(/(\d{5})(\d)/, '$1-$2');
                }
                e.target.value = value;
            }
        });
    }
});
</script>
{% endblock %}

