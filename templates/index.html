{% extends "base.html" %}

{% block title %}AADVITA - {{ _('In√≠cio') }}{% endblock %}

{% block content %}
<!-- Slider Principal - HTML5/CSS3/JS Puro - SEM Flash -->
{% if slider_images %}
<section class="hero-slider" aria-label="Slider Principal">
    <div class="slider-container">
        <div class="slider-wrapper">
            <div class="slider-track" id="slider-track">
                {% for imagem in slider_images %}
                <div class="slider-slide {% if loop.index == 1 %}active{% endif %}" data-slide="{{ loop.index0 }}">
                    {% if imagem.link %}
                    <a href="{{ imagem.link }}" class="slider-link" aria-label="{{ imagem.titulo }}" style="display: block; width: 100%; height: 100%;">
                        <img src="{{ slider_imagem_url(imagem) or url_for('static', filename=imagem.imagem) }}" 
                             alt="{{ imagem.descricao_imagem or imagem.titulo }}" 
                             class="slider-image"
                             loading="eager">
                    </a>
                    {% else %}
                    <img src="{% if imagem.imagem_base64 or imagem.imagem.startswith('base64:') %}/slider/{{ imagem.id }}/imagem{% else %}{{ url_for('static', filename=imagem.imagem) }}{% endif %}" 
                         alt="{{ imagem.descricao_imagem or imagem.titulo }}" 
                         class="slider-image"
                         loading="eager">
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            
            <!-- Bot√µes de Navega√ß√£o (Setas) -->
            {% if slider_images|length > 1 %}
            <button class="slider-nav slider-prev" aria-label="{{ _('Imagem anterior') }}" id="slider-prev">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button class="slider-nav slider-next" aria-label="{{ _('Pr√≥xima imagem') }}" id="slider-next">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <!-- Indicadores (Pontos) -->
            <div class="slider-indicators" id="slider-indicators">
                {% for imagem in slider_images %}
                <button class="slider-indicator {% if loop.index == 1 %}active{% endif %}" 
                        data-slide="{{ loop.index0 }}" 
                        aria-label="{{ _('Ir para imagem') }} {{ loop.index }}"
                        aria-current="{% if loop.index == 1 %}true{% else %}false{% endif %}">
                </button>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<!-- A√ß√µes principais abaixo do slider -->
<section class="hero-action-buttons" aria-label="{{ _('A√ß√µes principais') }}">
    <div class="container hero-action-container">
        <div class="hero-action-group">
            <div class="transparency-btn-wrapper">
                <a href="{{ url_for('transparencia') }}" class="btn-transparency hero-action-link">{{ _('Transpar√™ncia') }}</a>
            </div>
            <div class="associate-btn-wrapper">
                <a href="{{ url_for('associe_se') }}" class="btn-associate hero-action-link">{{ _('Associe-se') }}</a>
            </div>
            <div class="login-btn-wrapper">
                <a href="{{ url_for('login') }}" class="btn-login hero-action-link">{{ _('Entrar') }}</a>
            </div>
            <div class="volunteer-btn-wrapper">
                <a href="{{ url_for('voluntario_cadastro') }}" class="btn-volunteer hero-action-link">
                    {{ _('Seja Volunt√°rio') }}
                </a>
            </div>
            <div class="acessibilidade-btn-wrapper">
                <a href="{{ url_for('problema_acessibilidade_registrar') }}" class="btn-acessibilidade hero-action-link">
                    üö® {{ _('Radar de Acessibilidade') }}
                </a>
            </div>
            <div class="certificados-btn-wrapper">
                <a href="{{ url_for('certificado_validar_form') }}" class="btn-certificados hero-action-link">
                    üìú {{ _('Validar Certificados') }}
                </a>
            </div>
            <div class="reciclagem-btn-wrapper">
                <a href="{{ url_for('reciclagem_form') }}" class="btn-reciclagem hero-action-link">
                    ‚ôªÔ∏è {{ _('Reciclagem') }}
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Banners de Acesso R√°pido -->
{% if banners %}
<section class="banners-section" aria-label="{{ _('Acesso R√°pido') }}" style="padding: 3rem 0; background: var(--bg-light);">
    <div class="container">
        <div class="banners-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1200px; margin: 0 auto;">
            <!-- Banner Campanhas -->
            {% if banners.get('Campanhas') %}
            {% set banner = banners.get('Campanhas') %}
            <a href="{% if banner.url %}{{ banner.url }}{% else %}{{ url_for('campanhas') }}{% endif %}" class="banner-card" data-gradient-start="{{ banner.cor_gradiente_inicio }}" data-gradient-end="{{ banner.cor_gradiente_fim }}" style="display: block; border-radius: 1rem; padding: 2.5rem 2rem; text-decoration: none; color: white; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; min-height: 200px;">
                <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 60px; height: 60px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; backdrop-filter: blur(10px);">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <h3 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 0.75rem; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);">
                        {{ get_banner_text(banner, 'titulo') }}
                    </h3>
                    <p style="font-size: 1rem; opacity: 0.95; line-height: 1.6; margin: 0;">
                        {{ _('Conhe√ßa nossas campanhas e participe.') }}
                    </p>
                </div>
            </a>
            {% endif %}
            
            <!-- Banner Apoie-nos -->
            {% if banners.get('Apoie-nos') %}
            {% set banner = banners.get('Apoie-nos') %}
            <a href="{% if banner.url %}{{ banner.url }}{% else %}{{ url_for('apoie') }}{% endif %}" class="banner-card" data-gradient-start="{{ banner.cor_gradiente_inicio }}" data-gradient-end="{{ banner.cor_gradiente_fim }}" style="display: block; border-radius: 1rem; padding: 2.5rem 2rem; text-decoration: none; color: white; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; min-height: 200px;">
                <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 60px; height: 60px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; backdrop-filter: blur(10px);">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                    </div>
                    <h3 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 0.75rem; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);">
                        {{ get_banner_text(banner, 'titulo') }}
                    </h3>
                    <p style="font-size: 1rem; opacity: 0.95; line-height: 1.6; margin: 0;">
                        {{ _('Sua contribui√ß√£o transforma vidas!') }}
                    </p>
                </div>
            </a>
            {% endif %}
            
            <!-- Banner Editais -->
            {% if banners.get('Editais') %}
            {% set banner = banners.get('Editais') %}
            <a href="{% if banner.url %}{{ banner.url }}{% else %}{{ url_for('editais') }}{% endif %}" class="banner-card" data-gradient-start="{{ banner.cor_gradiente_inicio }}" data-gradient-end="{{ banner.cor_gradiente_fim }}" style="display: block; border-radius: 1rem; padding: 2.5rem 2rem; text-decoration: none; color: white; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; min-height: 200px;">
                <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 60px; height: 60px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; backdrop-filter: blur(10px);">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                        </svg>
                    </div>
                    <h3 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 0.75rem; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);">
                        {{ get_banner_text(banner, 'titulo') }}
                    </h3>
                    <p style="font-size: 1rem; opacity: 0.95; line-height: 1.6; margin: 0;">
                        {{ _('Confira nossos editais e oportunidades.') }}
                    </p>
                </div>
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<!-- Se√ß√£o "O que fazemos" -->
<section class="o-que-fazemos-section" aria-labelledby="o-que-fazemos-title" style="padding: 4rem 0; background: white;">
    <div class="container">
        <h2 id="o-que-fazemos-title" class="o-que-fazemos-title" style="text-align: center; font-size: 2.5rem; font-weight: 700; color: #1f2937; margin-bottom: 0.5rem; font-family: 'Inter', sans-serif;">
            {{ _('O que fazemos') }}
        </h2>
        <div style="width: 80px; height: 4px; background: #eab308; margin: 0 auto 2rem; border-radius: 2px;"></div>
        
        <div style="text-align: center; margin-bottom: 3rem;">
            <h3 style="font-size: 1.75rem; font-weight: 600; color: #1f2937; margin-bottom: 0.5rem; font-family: 'Inter', sans-serif;">
                {{ _('Bem-vindo √† AADVITA') }}
            </h3>
            <p style="font-size: 1.1rem; color: #6b7280; margin: 0; font-family: 'Inter', sans-serif;">
                {{ _('Associa√ß√£o dos Deficientes Visuais Tapuienses') }}
            </p>
        </div>
        
        {% if servicos_o_que_fazemos and (servicos_o_que_fazemos.get(1) or servicos_o_que_fazemos.get(2) or servicos_o_que_fazemos.get(3)) %}
        <style>
            /* For√ßar 3 colunas em telas grandes - prioridade m√°xima */
            .o-que-fazemos-grid {
                display: grid !important;
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 3rem 2rem !important;
                max-width: 1200px !important;
                margin: 0 auto !important;
                width: 100% !important;
            }
            .o-que-fazemos-column {
                display: flex !important;
                flex-direction: column !important;
                align-items: stretch !important;
                gap: 2rem !important;
            }
            .o-que-fazemos-item {
                flex-shrink: 0 !important;
                margin-bottom: 0 !important;
            }
            /* Apenas em telas menores que 900px usar 2 colunas */
            @media screen and (max-width: 900px) {
                .o-que-fazemos-grid {
                    grid-template-columns: repeat(2, 1fr) !important;
                    gap: 2rem 1.5rem !important;
                }
            }
            /* Apenas em telas menores que 600px usar 1 coluna */
            @media screen and (max-width: 600px) {
                #o-que-fazemos-grid {
                    grid-template-columns: 1fr !important;
                    gap: 2rem !important;
                    display: flex !important;
                    flex-direction: column !important;
                    max-width: 100% !important;
                }
                #o-que-fazemos-grid .o-que-fazemos-column {
                    display: flex !important;
                    flex-direction: column !important;
                    width: 100% !important;
                    gap: 1.5rem !important;
                    position: relative !important;
                }
                #o-que-fazemos-grid .o-que-fazemos-item {
                    width: 100% !important;
                    margin-bottom: 1.5rem !important;
                    position: relative !important;
                }
            }
            
            /* Mobile - todos os servi√ßos um abaixo do outro */
            @media screen and (max-width: 768px) {
                #o-que-fazemos-grid {
                    grid-template-columns: 1fr !important;
                    gap: 2rem !important;
                    display: flex !important;
                    flex-direction: column !important;
                    max-width: 100% !important;
                }
                #o-que-fazemos-grid .o-que-fazemos-column {
                    display: flex !important;
                    flex-direction: column !important;
                    width: 100% !important;
                    gap: 1.5rem !important;
                    position: relative !important;
                }
                #o-que-fazemos-grid .o-que-fazemos-item {
                    width: 100% !important;
                    margin-bottom: 1.5rem !important;
                    position: relative !important;
                }
            }
        </style>
        <div class="o-que-fazemos-grid" id="o-que-fazemos-grid">
            <!-- Coluna 1 -->
            <div class="o-que-fazemos-column" style="position: relative;">
                {% for servico in servicos_o_que_fazemos.get(1, []) %}
                <div class="o-que-fazemos-item" style="position: relative;">
                    <div style="display: flex; align-items: flex-start; gap: 1.5rem;">
                        <div style="position: relative; flex-shrink: 0;">
                            <div class="o-que-fazemos-icon" data-icon-color="{{ servico.cor_icone }}" style="width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                                {% if servico.icone_svg %}
                                    {{ servico.icone_svg|safe }}
                                {% else %}
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2" fill="none"/>
                                        <path d="M12 8V12L16 14" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                {% endif %}
                            </div>
                            {% if not loop.last %}
                            <div class="o-que-fazemos-line" style="position: absolute; left: 50%; top: 70px; transform: translateX(-50%); width: 2px; height: 60px; border-left: 2px dotted #d1d5db; z-index: 0;"></div>
                            {% endif %}
                        </div>
                        <div style="flex: 1; padding-top: 0.5rem;">
                            <h3 style="font-size: 1.25rem; font-weight: 700; color: #1f2937; margin-bottom: 0.75rem; line-height: 1.4;">{{ get_servico_text(servico, 'titulo') }}</h3>
                            <p style="font-size: 0.95rem; color: #6b7280; line-height: 1.6; margin: 0;">{{ get_servico_text(servico, 'descricao') }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Coluna 2 -->
            <div class="o-que-fazemos-column" style="position: relative;">
                {% for servico in servicos_o_que_fazemos.get(2, []) %}
                <div class="o-que-fazemos-item" style="position: relative;">
                    <div style="display: flex; align-items: flex-start; gap: 1.5rem;">
                        <div style="position: relative; flex-shrink: 0;">
                            <div class="o-que-fazemos-icon" data-icon-color="{{ servico.cor_icone }}" style="width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                                {% if servico.icone_svg %}
                                    {{ servico.icone_svg|safe }}
                                {% else %}
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2" fill="none"/>
                                        <path d="M12 8V12L16 14" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                {% endif %}
                            </div>
                            {% if not loop.last %}
                            <div class="o-que-fazemos-line" style="position: absolute; left: 50%; top: 70px; transform: translateX(-50%); width: 2px; height: 60px; border-left: 2px dotted #d1d5db; z-index: 0;"></div>
                            {% endif %}
                        </div>
                        <div style="flex: 1; padding-top: 0.5rem;">
                            <h3 style="font-size: 1.25rem; font-weight: 700; color: #1f2937; margin-bottom: 0.75rem; line-height: 1.4;">{{ get_servico_text(servico, 'titulo') }}</h3>
                            <p style="font-size: 0.95rem; color: #6b7280; line-height: 1.6; margin: 0;">{{ get_servico_text(servico, 'descricao') }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Coluna 3 -->
            <div class="o-que-fazemos-column" style="position: relative;">
                {% for servico in servicos_o_que_fazemos.get(3, []) %}
                <div class="o-que-fazemos-item" style="position: relative;">
                    <div style="display: flex; align-items: flex-start; gap: 1.5rem;">
                        <div style="position: relative; flex-shrink: 0;">
                            <div class="o-que-fazemos-icon" data-icon-color="{{ servico.cor_icone }}" style="width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                                {% if servico.icone_svg %}
                                    {{ servico.icone_svg|safe }}
                                {% else %}
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2" fill="none"/>
                                        <path d="M12 8V12L16 14" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                {% endif %}
                            </div>
                            {% if not loop.last %}
                            <div class="o-que-fazemos-line" style="position: absolute; left: 50%; top: 70px; transform: translateX(-50%); width: 2px; height: 60px; border-left: 2px dotted #d1d5db; z-index: 0;"></div>
                            {% endif %}
                        </div>
                        <div style="flex: 1; padding-top: 0.5rem;">
                            <h3 style="font-size: 1.25rem; font-weight: 700; color: #1f2937; margin-bottom: 0.75rem; line-height: 1.4;">{{ get_servico_text(servico, 'titulo') }}</h3>
                            <p style="font-size: 0.95rem; color: #6b7280; line-height: 1.6; margin: 0;">{{ get_servico_text(servico, 'descricao') }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div style="text-align: center; padding: 3rem; color: #6b7280;">
            <p style="margin: 0; font-size: 1.1rem;">{{ _('Nenhum servi√ßo cadastrado no momento.') }}</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- Se√ß√£o Informativo -->
<section class="informativo-section" aria-labelledby="informativo-title" style="padding: 3rem 0; background: var(--bg-light);">
    <div class="container">
        <div class="informativo-banners-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; max-width: 800px; margin: 0 auto;">
            <!-- Banner Not√≠cias -->
            <a href="{{ url_for('informativo', tipo='Noticia') }}" class="informativo-banner-card" style="display: block; background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%); border-radius: 1rem; padding: 2.5rem 2rem; text-decoration: none; color: white; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; min-height: 200px;">
                <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 60px; height: 60px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; backdrop-filter: blur(10px);">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                    </div>
                    <h3 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 0.75rem; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);">
                        {{ _('Not√≠cias') }}
                    </h3>
                    <p style="font-size: 1rem; opacity: 0.95; line-height: 1.6; margin: 0;">
                        {{ _('Fique por dentro das novidades da AADVITA.') }}
                    </p>
                </div>
            </a>
            
            <!-- Banner Podcast -->
            <a href="{{ url_for('informativo', tipo='Podcast') }}" class="informativo-banner-card" style="display: block; background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%); border-radius: 1rem; padding: 2.5rem 2rem; text-decoration: none; color: white; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; min-height: 200px;">
                <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 60px; height: 60px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; backdrop-filter: blur(10px);">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
                        </svg>
                    </div>
                    <h3 style="font-size: 1.75rem; font-weight: 800; margin-bottom: 0.75rem; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);">
                        {{ _('Podcast') }}
                    </h3>
                    <p style="font-size: 1rem; opacity: 0.95; line-height: 1.6; margin: 0;">
                        {{ _('Ou√ßa nossos podcasts e conte√∫dos em √°udio.') }}
                    </p>
                </div>
            </a>
        </div>
    </div>
</section>

<section id="destaques" class="destaques" aria-labelledby="destaques-title">
    <div class="container">
        <h2 id="destaques-title" class="section-title">{{ _('Destaques') }}</h2>
        
        <!-- Pr√≥ximas Reuni√µes Presenciais -->
        <section class="destaque-section" aria-labelledby="reunioes-presenciais-title">
            <h3 id="reunioes-presenciais-title" class="destaque-title">
                <span aria-hidden="true">üìÖ</span> {{ _('Pr√≥ximas Reuni√µes Presenciais') }}
            </h3>
            <div class="card-grid">
                {% if reuniones_presenciales %}
                    {% for reunion in reuniones_presenciales %}
                    <article class="card" role="article">
                        <div class="card-header">
                            <h4 class="card-title">{{ reunion.titulo }}</h4>
                            <time datetime="{{ reunion.fecha.strftime('%Y-%m-%d') }}" class="card-date">
                                {{ reunion.fecha.strftime('%d/%m/%Y') }} √†s {{ reunion.hora }}
                            </time>
                        </div>
                        <div class="card-body">
                            <p>{{ reunion.descripcion }}</p>
                            <p class="card-location">
                                <strong>{{ _('Local:') }}</strong> {{ reunion.lugar }}
                            </p>
                            {% if reunion.direccion %}
                            <p class="card-address">{{ reunion.direccion }}</p>
                            {% endif %}
                        </div>
                    </article>
                    {% endfor %}
                {% else %}
                    <p class="no-data">{{ _('N√£o h√° reuni√µes presenciais programadas no momento.') }}</p>
                {% endif %}
            </div>
            <a href="{{ url_for('agenda_presencial') }}" class="btn btn-secondary">{{ _('Ver todas as reuni√µes presenciais') }}</a>
        </section>

        <!-- Pr√≥ximas Reuni√µes Virtuais -->
        <section class="destaque-section destaque-section-blue" aria-labelledby="reunioes-virtuais-title">
            <h3 id="reunioes-virtuais-title" class="destaque-title">
                <span aria-hidden="true">üíª</span> {{ _('Pr√≥ximas Reuni√µes Virtuais') }}
            </h3>
            <div class="card-grid">
                {% if reuniones_virtuales %}
                    {% for reunion in reuniones_virtuales %}
                    <article class="card" role="article">
                        <div class="card-header">
                            <h4 class="card-title">{{ reunion.titulo }}</h4>
                            <time datetime="{{ reunion.fecha.strftime('%Y-%m-%d') }}" class="card-date">
                                {{ reunion.fecha.strftime('%d/%m/%Y') }} √†s {{ reunion.hora }}
                            </time>
                        </div>
                        <div class="card-body">
                            <p>{{ reunion.descripcion }}</p>
                            <p class="card-platform">
                                <strong>{{ _('Plataforma:') }}</strong> {{ reunion.plataforma }}
                            </p>
                            {% if reunion.link %}
                            <a href="{{ reunion.link }}" target="_blank" rel="noopener noreferrer" class="btn btn-link">
                                {{ _('Acessar reuni√£o') }}
                                <span class="sr-only">{{ _('(abre em nova aba)') }}</span>
                            </a>
                            {% endif %}
                        </div>
                    </article>
                    {% endfor %}
                {% else %}
                    <p class="no-data">{{ _('N√£o h√° reuni√µes virtuais programadas no momento.') }}</p>
                {% endif %}
            </div>
            <a href="{{ url_for('agenda_virtual') }}" class="btn btn-secondary">{{ _('Ver todas as reuni√µes virtuais') }}</a>
        </section>

        <!-- Projetos em Destaque -->
        <section class="destaque-section" aria-labelledby="projetos-title">
            <h3 id="projetos-title" class="destaque-title">
                <span aria-hidden="true">üöÄ</span> {{ _('Projetos em Destaque') }}
            </h3>
            <div class="card-grid">
                {% if projetos %}
                    {% for projeto in projetos %}
                    <article class="card" role="article">
                        {% if projeto.imagen %}
                        <div class="card-image">
                            <img src="{{ projeto_imagem_url(projeto) or url_for('static', filename=projeto.imagen) }}" alt="{{ projeto.descricao_imagem or projeto.titulo }}" loading="lazy" decoding="async">
                        </div>
                        {% endif %}
                        <div class="card-header">
                            <h4 class="card-title">{{ get_projeto_text(projeto, 'titulo') }}</h4>
                            <span class="badge badge-{{ 'success' if projeto.estado == 'Ativo' else 'secondary' }}">
                                {{ projeto.estado }}
                            </span>
                        </div>
                        <div class="card-body">
                            <p>{{ get_projeto_text(projeto, 'descripcion') }}</p>
                        </div>
                    </article>
                    {% endfor %}
                {% else %}
                    <p class="no-data">{{ _('N√£o h√° projetos cadastrados no momento.') }}</p>
                {% endif %}
            </div>
            <a href="{{ url_for('projetos') }}" class="btn btn-secondary">{{ _('Ver todos os projetos') }}</a>
        </section>

        <!-- Pr√≥ximos Eventos -->
        <section class="destaque-section" aria-labelledby="eventos-title">
            <h3 id="eventos-title" class="destaque-title">
                <span aria-hidden="true">üéâ</span> {{ _('Pr√≥ximos Eventos') }}
            </h3>
            <div class="card-grid">
                {% if eventos %}
                    {% for evento in eventos %}
                    <article class="card" role="article">
                        {% if evento.imagem %}
                        <div class="card-image">
                            <img src="{{ url_for('static', filename=evento.imagem) }}" alt="{{ evento.descricao_imagem or evento.titulo }}" loading="lazy" decoding="async">
                        </div>
                        {% endif %}
                        <div class="card-header">
                            <h4 class="card-title">{{ get_evento_text(evento, 'titulo') }}</h4>
                            <time datetime="{{ evento.data.strftime('%Y-%m-%d') }}" class="card-date">
                                {{ evento.data.strftime('%d/%m/%Y') }}{% if evento.hora %} √†s {{ evento.hora }}{% endif %}
                            </time>
                        </div>
                        <div class="card-body">
                            <p>{{ get_evento_text(evento, 'descricao') }}</p>
                            {% if evento.tipo %}
                            <p class="card-platform">
                                <strong>{{ _('Tipo:') }}</strong> {{ evento.tipo }}
                            </p>
                            {% endif %}
                            {% if evento.local %}
                            <p class="card-location">
                                <strong>{{ _('Local:') }}</strong> {{ evento.local }}
                            </p>
                            {% endif %}
                            {% if evento.endereco %}
                            <p class="card-address">{{ evento.endereco }}</p>
                            {% endif %}
                            {% if evento.link %}
                            <a href="{{ evento.link }}" target="_blank" rel="noopener noreferrer" class="btn btn-link">
                                {{ _('Acessar evento') }}
                                <span class="sr-only">{{ _('(abre em nova aba)') }}</span>
                            </a>
                            {% endif %}
                        </div>
                    </article>
                    {% endfor %}
                {% else %}
                    <p class="no-data">{{ _('N√£o h√° eventos cadastrados no momento.') }}</p>
                {% endif %}
            </div>
            <a href="{{ url_for('eventos') }}" class="btn btn-secondary">{{ _('Ver todos os eventos') }}</a>
        </section>

        <!-- A√ß√µes Recentes -->
        <section class="destaque-section destaque-section-blue" aria-labelledby="acoes-title">
            <h3 id="acoes-title" class="destaque-title">
                <span aria-hidden="true">‚ú®</span> {{ _('A√ß√µes Recentes') }}
            </h3>
            <div class="card-grid">
                {% if acoes %}
                    {% for acao in acoes %}
                    <article class="card" role="article">
                        {% if acao.imagem %}
                        <div class="card-image">
                            <img src="{{ acao_imagem_url(acao) or url_for('static', filename=acao.imagem) }}" alt="{{ acao.descricao_imagem or acao.titulo }}" loading="lazy" decoding="async">
                        </div>
                        {% endif %}
                        <div class="card-header">
                            <h4 class="card-title">{{ get_acao_text(acao, 'titulo') }}</h4>
                            <time datetime="{{ acao.data.strftime('%Y-%m-%d') }}" class="card-date">
                                {{ acao.data.strftime('%d/%m/%Y') }}
                            </time>
                        </div>
                        <div class="card-body">
                            <p>{{ get_acao_text(acao, 'descricao') }}</p>
                            {% if acao.categoria %}
                            <span class="badge">{{ acao.categoria }}</span>
                            {% endif %}
                        </div>
                    </article>
                    {% endfor %}
                {% else %}
                    <p class="no-data">{{ _('N√£o h√° a√ß√µes cadastradas no momento.') }}</p>
                {% endif %}
            </div>
            <a href="{{ url_for('acoes') }}" class="btn btn-secondary">{{ _('Ver todas as a√ß√µes') }}</a>
        </section>

        <!-- M√≥dulo R√°dio AADVITA -->
        <section class="radio-banner-section destaque-section" aria-labelledby="radio-banner-title" style="background: #3b82f6; padding: 3rem 2rem; margin: 3rem 0; border-radius: 1rem;">
            <div style="display: flex; align-items: center; justify-content: space-between; gap: 2rem; flex-wrap: wrap;">
                <!-- Logo e Ilustra√ß√£o -->
                <div style="display: flex; align-items: center; gap: 2rem; flex: 1; min-width: 300px;">
                    <!-- Ilustra√ß√£o da pessoa com fone de ouvido e microfone -->
                    <div style="flex-shrink: 0;">
                        <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Cabe√ßa -->
                            <circle cx="60" cy="45" r="25" fill="#d4a574" stroke="#c49464" stroke-width="2"/>
                            <!-- Cabelo encaracolado -->
                            <path d="M45 35 Q40 25 50 20 Q55 18 60 20 Q65 18 70 20 Q80 25 75 35 Q75 30 70 28 Q65 26 60 28 Q55 26 50 28 Q45 30 45 35 Z" fill="#8b6f47" opacity="0.8"/>
                            <!-- Fone de ouvido amarelo esquerdo -->
                            <path d="M35 50 L35 65 Q35 70 40 70 L50 70 Q55 70 55 65 L55 50 Q55 45 50 45 L40 45 Q35 45 35 50 Z" fill="#fbbf24" stroke="#f59e0b" stroke-width="2"/>
                            <!-- Fone de ouvido amarelo direito -->
                            <path d="M85 50 L85 65 Q85 70 90 70 L100 70 Q105 70 105 65 L105 50 Q105 45 100 45 L90 45 Q85 45 85 50 Z" fill="#fbbf24" stroke="#f59e0b" stroke-width="2"/>
                            <!-- Arco do fone -->
                            <path d="M40 70 Q45 75 50 75 Q55 75 60 72 Q65 75 70 75 Q75 75 80 70" stroke="#f59e0b" stroke-width="4" fill="none" stroke-linecap="round"/>
                            <!-- Olhos fechados -->
                            <path d="M50 42 Q52 40 54 42" stroke="#ffffff" stroke-width="2" stroke-linecap="round" fill="none"/>
                            <path d="M66 42 Q68 40 70 42" stroke="#ffffff" stroke-width="2" stroke-linecap="round" fill="none"/>
                            <!-- Boca aberta (cantando) -->
                            <ellipse cx="60" cy="52" rx="4" ry="3" fill="#ffffff" opacity="0.9"/>
                            <!-- Corpo -->
                            <rect x="50" y="70" width="20" height="30" rx="3" fill="#60a5fa" stroke="#3b82f6" stroke-width="2"/>
                            <!-- Microfone azul claro -->
                            <rect x="75" y="75" width="8" height="15" rx="1" fill="#60a5fa" stroke="#3b82f6" stroke-width="2"/>
                            <circle cx="79" cy="92" r="3" fill="#3b82f6"/>
                            <line x1="79" y1="75" x2="79" y2="70" stroke="#ffffff" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <!-- Logo R√°dio AADVITA -->
                    <div style="flex: 1;">
                        <div style="color: white;">
                            <div style="font-size: 2rem; font-weight: 700; text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); letter-spacing: 0.05em; margin-bottom: 0.2rem;">
                                R√°dio
                            </div>
                            <div style="font-size: 3.5rem; font-weight: 900; text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); letter-spacing: 0.05em; line-height: 1;">
                                AADVITA
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Bot√£o OU√áA ‚Äì CLIQUE AQUI -->
                <div style="flex-shrink: 0;">
                    <a href="{{ url_for('radio') }}" class="radio-banner-button" style="display: inline-block; background: #fbbf24; color: white; padding: 1.25rem 2.5rem; border-radius: 0.75rem; text-decoration: none; font-weight: 800; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 0.05em; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; border: 2px solid #f59e0b;">
                        OU√áA ‚Äì CLIQUE AQUI
                    </a>
                </div>
            </div>
        </section>
    </div>
</section>

<section class="destaques" aria-labelledby="destaques-title-continuation" style="padding-top: 3rem;">
    <div class="container">
        <!-- V√≠deos em Destaque -->
        <section class="destaque-section" aria-labelledby="videos-title">
            <h3 id="videos-title" class="destaque-title">
                <span aria-hidden="true">üé•</span> {{ _('V√≠deos em Destaque') }}
            </h3>
            
            {% if videos %}
                <div class="video-grid" role="list">
                    {% for video in videos %}
                    <article class="video-card" role="listitem">
                        <div class="video-thumbnail-wrapper" data-video-id="{{ video.get_youtube_id() }}" data-embed-url="{{ video.get_embed_url() }}">
                            {% if video.get_thumbnail_url() %}
                            <a href="{{ video.url_youtube }}" target="_blank" rel="noopener noreferrer" class="video-link" aria-label="{{ _('Assistir v√≠deo') }}: {{ get_video_text(video, 'titulo') }}">
                                <img src="{{ video.get_thumbnail_url() }}" loading="lazy" decoding="async" 
                                     alt="{{ get_video_text(video, 'titulo') }}" 
                                     class="video-thumbnail"
                                     onerror="this.parentElement.parentElement.classList.add('thumbnail-error'); this.style.display='none';">
                                <div class="video-play-button" aria-hidden="true">
                                    <svg width="68" height="48" viewBox="0 0 68 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/>
                                        <path d="M45 24L27 14v20l18-10z" fill="white"/>
                                    </svg>
                                </div>
                            </a>
                            {% endif %}
                            <div class="video-embed-container" style="display: {% if not video.get_thumbnail_url() %}block{% else %}none{% endif %};">
                                {% if video.get_embed_url() %}
                                <iframe src="{{ video.get_embed_url() }}" 
                                        frameborder="0" 
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                        allowfullscreen
                                        class="video-embed-iframe"
                                        title="{{ get_video_text(video, 'titulo') }}"></iframe>
                                {% endif %}
                            </div>
                        </div>
                        <div class="video-info">
                            <h4 class="video-title">{{ get_video_text(video, 'titulo') }}</h4>
                            {% if video.descricao %}
                            <p class="video-description">{{ get_video_text(video, 'descricao')[:100] }}{% if get_video_text(video, 'descricao')|length > 100 %}...{% endif %}</p>
                            {% endif %}
                            {% if video.categoria %}
                            <span class="badge badge-secondary">{{ video.categoria }}</span>
                            {% endif %}
                        </div>
                    </article>
                    {% endfor %}
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <a href="{{ url_for('videos') }}" class="btn btn-secondary">{{ _('Ver todos os v√≠deos') }}</a>
                </div>
            {% else %}
                <p class="no-data">{{ _('Nenhum v√≠deo cadastrado no momento.') }}</p>
            {% endif %}
        </section>

        <!-- Apoiadores -->
        {% if apoiadores %}
        <section class="destaque-section" aria-labelledby="apoiadores-title">
            <h3 id="apoiadores-title" class="destaque-title">
                <span aria-hidden="true">ü§ù</span> {{ _('Nossos Apoiadores') }}
            </h3>
            
            <!-- Grid de Apoiadores -->
            <div class="apoiadores-grid-container" style="position: relative; min-height: 300px;">
                <div class="apoiadores-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                    {% for apoiador in apoiadores %}
                    <div class="apoiador-grid-item" style="opacity: 1; transform: translateY(0);">
                        {% if apoiador.website %}
                        <a href="{{ apoiador.website }}" 
                           target="_blank" 
                           rel="noopener noreferrer" 
                           class="apoiador-grid-link"
                           aria-label="Visitar site de {{ apoiador.nome }}"
                           style="display: block; text-decoration: none;">
                        {% endif %}
                        <div class="apoiador-image-container" style="background: transparent !important; border: none; padding: 1rem; display: flex !important; align-items: center !important; justify-content: center !important; height: 180px; transition: transform 0.3s ease;">
                            {% if apoiador.logo %}
                            <img src="{{ apoiador_logo_url(apoiador) or url_for('static', filename=apoiador.logo) }}" loading="lazy" decoding="async" 
                                 alt="{{ apoiador.descricao_imagem or apoiador.nome }}" 
                                 class="apoiador-grid-image"
                                 style="max-width: 100% !important; max-height: 100% !important; object-fit: contain !important; width: auto !important; height: auto !important; display: block !important; opacity: 1 !important; visibility: visible !important; filter: none !important; -webkit-filter: none !important; background: transparent !important;"
                                 loading="lazy"
                                 onerror="console.error('Erro ao carregar logo:', '{{ apoiador.logo }}'); this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align:center; color:#999; font-size:0.9rem; padding:1rem;\'>Logo n√£o dispon√≠vel</div>';">
                            {% else %}
                            <div style="text-align:center; color:#999; font-size:0.9rem; padding:1rem;">Sem logo</div>
                            {% endif %}
                        </div>
                        {% if apoiador.website %}
                        </a>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
        {% endif %}
    </div>
</section>

<!-- JavaScript do Slider - HTML5/CSS3/JS Puro - SEM Flash -->
{% if slider_images and slider_images|length > 1 %}
<script>
// Slider HTML5 - Garantir que primeiro slide seja exibido corretamente
document.addEventListener('DOMContentLoaded', function() {
    const sliderTrack = document.getElementById('slider-track');
    const slides = document.querySelectorAll('.slider-slide');
    const indicators = document.querySelectorAll('.slider-indicator');
    const prevButton = document.getElementById('slider-prev');
    const nextButton = document.getElementById('slider-next');
    
    if (!sliderTrack || !slides.length || slides.length <= 1) return;
    
    let currentSlide = 0;
    let autoplayInterval = null;
    const autoplayDelay = 5000; // 5 segundos
    
    function showSlide(index) {
        // Garantir que o √≠ndice est√° dentro dos limites
        if (index < 0) index = slides.length - 1;
        if (index >= slides.length) index = 0;
        
        // Se j√° √© o slide ativo, n√£o fazer nada
        if (slides[index] && slides[index].classList.contains('active')) {
            return;
        }
        
        const currentActive = document.querySelector('.slider-slide.active');
        const nextSlide = slides[index];
        
        // Primeiro, adicionar active ao pr√≥ximo slide (vai aparecer por baixo/ao lado)
        if (nextSlide) {
            nextSlide.classList.add('active');
            nextSlide.style.zIndex = '3';
        }
        
        // Usar requestAnimationFrame para garantir renderiza√ß√£o
        requestAnimationFrame(function() {
            // Remover active do slide anterior
            if (currentActive && currentActive !== nextSlide) {
                currentActive.classList.remove('active');
                currentActive.style.zIndex = '1';
            }
            
            // Ajustar z-index do slide atual
            if (nextSlide) {
                nextSlide.style.zIndex = '2';
            }
        });
        
        // Atualizar indicadores
        indicators.forEach((indicator, i) => {
            if (i === index) {
                indicator.classList.add('active');
                indicator.setAttribute('aria-current', 'true');
            } else {
                indicator.classList.remove('active');
                indicator.setAttribute('aria-current', 'false');
            }
        });
        
        currentSlide = index;
    }
    
    function nextSlide() {
        const next = (currentSlide + 1) % slides.length;
        showSlide(next);
    }
    
    function prevSlide() {
        const prev = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(prev);
    }
    
    function goToSlide(index) {
        if (index >= 0 && index < slides.length) {
            showSlide(index);
        }
    }
    
    function startAutoplay() {
        // Limpar intervalo anterior se existir
        if (autoplayInterval) {
            clearInterval(autoplayInterval);
        }
        // Iniciar novo intervalo
        autoplayInterval = setInterval(function() {
            nextSlide();
        }, autoplayDelay);
    }
    
    function stopAutoplay() {
        if (autoplayInterval) {
            clearInterval(autoplayInterval);
            autoplayInterval = null;
        }
    }
    
    // Event listeners
    if (nextButton) {
        nextButton.addEventListener('click', function() {
            stopAutoplay();
            nextSlide();
            startAutoplay();
        });
    }
    
    if (prevButton) {
        prevButton.addEventListener('click', function() {
            stopAutoplay();
            prevSlide();
            startAutoplay();
        });
    }
    
    // Event listeners para os indicadores
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', function() {
            stopAutoplay();
            goToSlide(index);
            startAutoplay();
        });
    });
    
    // Suporte para touch/swipe em dispositivos m√≥veis
    let touchStartX = 0;
    let touchEndX = 0;
    let touchStartY = 0;
    let touchEndY = 0;
    const minSwipeDistance = 50; // Dist√¢ncia m√≠nima para considerar um swipe
    
    if (sliderTrack) {
        sliderTrack.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });
        
        sliderTrack.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, { passive: true });
    }
    
    function handleSwipe() {
        const deltaX = touchEndX - touchStartX;
        const deltaY = touchEndY - touchStartY;
        const absDeltaX = Math.abs(deltaX);
        const absDeltaY = Math.abs(deltaY);
        
        // Verificar se √© um swipe horizontal (n√£o vertical)
        if (absDeltaX > absDeltaY && absDeltaX > minSwipeDistance) {
            stopAutoplay();
            if (deltaX > 0) {
                // Swipe para direita = slide anterior
                prevSlide();
            } else {
                // Swipe para esquerda = pr√≥ximo slide
                nextSlide();
            }
            startAutoplay();
        }
    }
    
    // Pausar autoplay ao passar o mouse sobre o slider (desktop)
    const sliderWrapper = document.querySelector('.slider-wrapper');
    if (sliderWrapper) {
        sliderWrapper.addEventListener('mouseenter', stopAutoplay);
        sliderWrapper.addEventListener('mouseleave', startAutoplay);
        
        // Pausar autoplay ao tocar no slider (mobile)
        sliderWrapper.addEventListener('touchstart', function() {
            stopAutoplay();
        }, { passive: true });
        
        // Retomar autoplay ap√≥s 3 segundos sem toque (mobile)
        let touchTimeout = null;
        sliderWrapper.addEventListener('touchend', function() {
            if (touchTimeout) clearTimeout(touchTimeout);
            touchTimeout = setTimeout(function() {
                startAutoplay();
            }, 3000);
        }, { passive: true });
    }
    
    // Navega√ß√£o por teclado
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft') {
            stopAutoplay();
            prevSlide();
            startAutoplay();
        } else if (e.key === 'ArrowRight') {
            stopAutoplay();
            nextSlide();
            startAutoplay();
        }
    });
    
    // Pr√©-carregar todas as imagens
    slides.forEach((slide) => {
        const img = slide.querySelector('.slider-image');
        if (img && img.src) {
            // For√ßar carregamento da imagem
            const preloadImg = new Image();
            preloadImg.src = img.src;
        }
    });
    
    // Inicializar o slider - garantir que primeiro slide seja exibido imediatamente
    if (slides.length > 0) {
        // For√ßar exibi√ß√£o do primeiro slide imediatamente para evitar tela preta
        const firstSlide = slides[0];
        if (firstSlide) {
            firstSlide.classList.add('active');
            firstSlide.style.opacity = '1';
            firstSlide.style.zIndex = '2';
            firstSlide.style.pointerEvents = 'auto';
        }
        showSlide(0);
    }
    
    // Iniciar autoplay automaticamente a cada 5 segundos
    if (slides.length > 1) {
        // Iniciar autoplay ap√≥s 5 segundos
        setTimeout(function() {
            startAutoplay();
        }, autoplayDelay);
    }
    
    // Pausar quando a aba n√£o estiver vis√≠vel
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            stopAutoplay();
        } else {
            if (slides.length > 1) {
                startAutoplay();
            }
        }
    });
});

// Detectar quando thumbnail falha e mostrar player do YouTube diretamente
document.addEventListener('DOMContentLoaded', function() {
    const videoWrappers = document.querySelectorAll('.video-thumbnail-wrapper');
    
    videoWrappers.forEach(wrapper => {
        const thumbnail = wrapper.querySelector('.video-thumbnail');
        const embedContainer = wrapper.querySelector('.video-embed-container');
        const videoLink = wrapper.querySelector('.video-link');
        
        if (thumbnail) {
            thumbnail.addEventListener('error', function() {
                // Esconder o link com thumbnail
                if (videoLink) {
                    videoLink.style.display = 'none';
                }
                // Mostrar o iframe
                if (embedContainer) {
                    embedContainer.style.display = 'block';
                }
                wrapper.classList.add('thumbnail-error');
            });
        } else if (embedContainer) {
            // Se n√£o tem thumbnail, mostrar iframe diretamente
            embedContainer.style.display = 'block';
        }
    });
});
</script>
{% endif %}


<!-- Lightbox Modal -->
<div id="lightbox-modal" class="lightbox-modal" role="dialog" aria-labelledby="lightbox-title" aria-hidden="true">
    <button class="lightbox-close" type="button" aria-label="{{ _('Fechar') }}" onclick="if(typeof closeLightbox === 'function') closeLightbox(); else { document.getElementById('lightbox-modal').classList.remove('active'); document.body.style.overflow = ''; }">
        <span aria-hidden="true">&times;</span>
    </button>
    <button class="lightbox-prev" aria-label="{{ _('Anterior') }}">
        <span aria-hidden="true">&#8249;</span>
    </button>
    <button class="lightbox-next" aria-label="{{ _('Pr√≥xima') }}">
        <span aria-hidden="true">&#8250;</span>
    </button>
    <div class="lightbox-content">
        <img id="lightbox-image" src="" alt="{{ _('Imagem ampliada') }}" class="lightbox-img">
        <div id="lightbox-caption" class="lightbox-caption"></div>
    </div>
</div>
{% endblock %}

