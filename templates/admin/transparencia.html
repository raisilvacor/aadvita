{% extends "admin/base.html" %}

{% block title %}Gerenciar Transpar√™ncia{% endblock %}

{% block page_title %}Gerenciar Transpar√™ncia{% endblock %}

{% block content %}
<!-- Relat√≥rios Financeiros -->
<div class="admin-card" style="margin-bottom: 2rem;">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Relat√≥rios Financeiros</h2>
        <a href="{{ url_for('admin_relatorio_novo') }}" class="btn-admin btn-admin-primary">
            <span>‚ûï</span> Novo Relat√≥rio
        </a>
    </div>
    
    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>T√≠tulo (PT)</th>
                    <th>Tipo</th>
                    <th>Data</th>
                    <th>Arquivo</th>
                    <th>Ordem</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% if relatorios %}
                    {% for relatorio in relatorios %}
                    <tr>
                        <td>{{ relatorio.titulo_pt }}</td>
                        <td>
                            {% if relatorio.tipo == 'relatorio' %}
                                Relat√≥rio
                            {% elif relatorio.tipo == 'demonstrativo' %}
                                Demonstrativo
                            {% elif relatorio.tipo == 'balanco' %}
                                Balan√ßo
                            {% else %}
                                {{ relatorio.tipo }}
                            {% endif %}
                        </td>
                        <td>{% if relatorio.data_relatorio %}{{ relatorio.data_relatorio.strftime('%d/%m/%Y') }}{% else %}-{% endif %}</td>
                        <td>
                            {% if relatorio.arquivo %}
                                <a href="{{ url_for('static', filename=relatorio.arquivo) }}" target="_blank" class="btn-admin btn-admin-edit btn-admin-small">
                                    <span>üìÑ</span> Ver
                                </a>
                            {% else %}
                                <span style="color: var(--text-light);">Sem arquivo</span>
                            {% endif %}
                        </td>
                        <td>{{ relatorio.ordem }}</td>
                        <td>
                            <a href="{{ url_for('admin_relatorio_editar', id=relatorio.id) }}" class="btn-admin btn-admin-edit btn-admin-small" style="margin-right: 0.5rem;">
                                <span>‚úèÔ∏è</span> Editar
                            </a>
                            <form method="POST" action="{{ url_for('admin_relatorio_excluir', id=relatorio.id) }}" style="display: inline;" onsubmit="return confirm('Tem certeza que deseja excluir este relat√≥rio?');">
                                <button type="submit" class="btn-admin btn-admin-danger btn-admin-small">
                                    <span>üóëÔ∏è</span> Excluir
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 2rem; color: var(--text-light);">
                            Nenhum relat√≥rio financeiro cadastrado.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<!-- Estatuto e Documentos -->
<div class="admin-card" style="margin-bottom: 2rem;">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Estatuto e Documentos</h2>
        <a href="{{ url_for('admin_documento_novo') }}" class="btn-admin btn-admin-primary">
            <span>‚ûï</span> Novo Documento
        </a>
    </div>
    
    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>T√≠tulo (PT)</th>
                    <th>Tipo</th>
                    <th>Data</th>
                    <th>Arquivo</th>
                    <th>Ordem</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% if documentos %}
                    {% for documento in documentos %}
                    <tr>
                        <td>{{ documento.titulo_pt }}</td>
                        <td>
                            {% if documento.tipo == 'estatuto' %}
                                Estatuto
                            {% elif documento.tipo == 'ata' %}
                                Ata
                            {% elif documento.tipo == 'documento' %}
                                Documento
                            {% else %}
                                {{ documento.tipo }}
                            {% endif %}
                        </td>
                        <td>{% if documento.data_documento %}{{ documento.data_documento.strftime('%d/%m/%Y') }}{% else %}-{% endif %}</td>
                        <td>
                            {% if documento.arquivo %}
                                <a href="{{ url_for('static', filename=documento.arquivo) }}" target="_blank" class="btn-admin btn-admin-edit btn-admin-small">
                                    <span>üìÑ</span> Ver
                                </a>
                            {% else %}
                                <span style="color: var(--text-light);">Sem arquivo</span>
                            {% endif %}
                        </td>
                        <td>{{ documento.ordem }}</td>
                        <td>
                            <a href="{{ url_for('admin_documento_editar', id=documento.id) }}" class="btn-admin btn-admin-edit btn-admin-small" style="margin-right: 0.5rem;">
                                <span>‚úèÔ∏è</span> Editar
                            </a>
                            <form method="POST" action="{{ url_for('admin_documento_excluir', id=documento.id) }}" style="display: inline;" onsubmit="return confirm('Tem certeza que deseja excluir este documento?');">
                                <button type="submit" class="btn-admin btn-admin-danger btn-admin-small">
                                    <span>üóëÔ∏è</span> Excluir
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 2rem; color: var(--text-light);">
                            Nenhum documento cadastrado.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<!-- Presta√ß√£o de Contas -->
<div class="admin-card" style="margin-bottom: 2rem;">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Presta√ß√£o de Contas</h2>
        <a href="{{ url_for('admin_prestacao_novo') }}" class="btn-admin btn-admin-primary">
            <span>‚ûï</span> Nova Presta√ß√£o
        </a>
    </div>
    
    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>T√≠tulo (PT)</th>
                    <th>Per√≠odo</th>
                    <th>Arquivo</th>
                    <th>Ordem</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% if prestacoes %}
                    {% for prestacao in prestacoes %}
                    <tr>
                        <td>{{ prestacao.titulo_pt }}</td>
                        <td>
                            {% if prestacao.periodo_inicio and prestacao.periodo_fim %}
                                {{ prestacao.periodo_inicio.strftime('%d/%m/%Y') }} - {{ prestacao.periodo_fim.strftime('%d/%m/%Y') }}
                            {% elif prestacao.periodo_inicio %}
                                A partir de {{ prestacao.periodo_inicio.strftime('%d/%m/%Y') }}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                        <td>
                            {% if prestacao.arquivo %}
                                <a href="{{ url_for('static', filename=prestacao.arquivo) }}" target="_blank" class="btn-admin btn-admin-edit btn-admin-small">
                                    <span>üìÑ</span> Ver
                                </a>
                            {% else %}
                                <span style="color: var(--text-light);">Sem arquivo</span>
                            {% endif %}
                        </td>
                        <td>{{ prestacao.ordem }}</td>
                        <td>
                            <a href="{{ url_for('admin_prestacao_editar', id=prestacao.id) }}" class="btn-admin btn-admin-edit btn-admin-small" style="margin-right: 0.5rem;">
                                <span>‚úèÔ∏è</span> Editar
                            </a>
                            <form method="POST" action="{{ url_for('admin_prestacao_excluir', id=prestacao.id) }}" style="display: inline;" onsubmit="return confirm('Tem certeza que deseja excluir esta presta√ß√£o de contas?');">
                                <button type="submit" class="btn-admin btn-admin-danger btn-admin-small">
                                    <span>üóëÔ∏è</span> Excluir
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem; color: var(--text-light);">
                            Nenhuma presta√ß√£o de contas cadastrada.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<!-- Relat√≥rios de Atividades -->
<div class="admin-card" style="margin-bottom: 2rem;">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Relat√≥rios de Atividades</h2>
        <a href="{{ url_for('admin_relatorio_atividade_novo') }}" class="btn-admin btn-admin-primary">
            <span>‚ûï</span> Novo Relat√≥rio
        </a>
    </div>
    
    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>T√≠tulo (PT)</th>
                    <th>Per√≠odo</th>
                    <th>Arquivo</th>
                    <th>Ordem</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% if relatorios_atividades %}
                    {% for relatorio in relatorios_atividades %}
                    <tr>
                        <td>{{ relatorio.titulo_pt }}</td>
                        <td>
                            {% if relatorio.periodo_inicio and relatorio.periodo_fim %}
                                {{ relatorio.periodo_inicio.strftime('%d/%m/%Y') }} - {{ relatorio.periodo_fim.strftime('%d/%m/%Y') }}
                            {% elif relatorio.periodo_inicio %}
                                A partir de {{ relatorio.periodo_inicio.strftime('%d/%m/%Y') }}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                        <td>
                            {% if relatorio.arquivo or relatorio.arquivo_base64 %}
                                <a href="{{ url_for('relatorio_atividade_arquivo', id=relatorio.id) }}" target="_blank" class="btn-admin btn-admin-edit btn-admin-small">
                                    <span>üìÑ</span> Ver
                                </a>
                            {% else %}
                                <span style="color: var(--text-light);">Sem arquivo</span>
                            {% endif %}
                        </td>
                        <td>{{ relatorio.ordem }}</td>
                        <td>
                            <a href="{{ url_for('admin_relatorio_atividade_editar', id=relatorio.id) }}" class="btn-admin btn-admin-edit btn-admin-small" style="margin-right: 0.5rem;">
                                <span>‚úèÔ∏è</span> Editar
                            </a>
                            <form method="POST" action="{{ url_for('admin_relatorio_atividade_excluir', id=relatorio.id) }}" style="display: inline;" onsubmit="return confirm('Tem certeza que deseja excluir este relat√≥rio de atividades?');">
                                <button type="submit" class="btn-admin btn-admin-danger btn-admin-small">
                                    <span>üóëÔ∏è</span> Excluir
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem; color: var(--text-light);">
                            Nenhum relat√≥rio de atividades cadastrado.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<!-- Doa√ß√µes e Recursos -->
<div class="admin-card">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Doa√ß√µes e Recursos</h2>
        <a href="{{ url_for('admin_doacao_info_novo') }}" class="btn-admin btn-admin-primary">
            <span>‚ûï</span> Nova Informa√ß√£o
        </a>
    </div>
    
    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>T√≠tulo (PT)</th>
                    <th>Ordem</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% if informacoes_doacao %}
                    {% for info in informacoes_doacao %}
                    <tr>
                        <td>{{ info.titulo_pt }}</td>
                        <td>{{ info.ordem }}</td>
                        <td>
                            <a href="{{ url_for('admin_doacao_info_editar', id=info.id) }}" class="btn-admin btn-admin-edit btn-admin-small" style="margin-right: 0.5rem;">
                                <span>‚úèÔ∏è</span> Editar
                            </a>
                            <form method="POST" action="{{ url_for('admin_doacao_info_excluir', id=info.id) }}" style="display: inline;" onsubmit="return confirm('Tem certeza que deseja excluir esta informa√ß√£o?');">
                                <button type="submit" class="btn-admin btn-admin-danger btn-admin-small">
                                    <span>üóëÔ∏è</span> Excluir
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3" style="text-align: center; padding: 2rem; color: var(--text-light);">
                            Nenhuma informa√ß√£o de doa√ß√£o cadastrada.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

