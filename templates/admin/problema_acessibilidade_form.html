{% extends "admin/base.html" %}

{% block title %}Detalhe Problema de Acessibilidade{% endblock %}

{% block page_title %}Detalhe Problema de Acessibilidade{% endblock %}

{% block content %}
<div class="admin-card">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Detalhes do Problema</h2>
        <a href="{{ url_for('admin_problemas_acessibilidade') }}" class="btn-admin btn-admin-secondary">Voltar</a>
    </div>
    
    <form method="POST" style="padding: 1.5rem;">
        <div class="form-group">
            <label for="tipo_problema"><strong>Tipo de Problema</strong></label>
            <input type="text" id="tipo_problema" name="tipo_problema" value="{{ problema.tipo_problema }}" class="form-input" required>
        </div>

        <div class="form-group">
            <label for="localizacao"><strong>Localiza√ß√£o</strong></label>
            <input type="text" id="localizacao" name="localizacao" value="{{ problema.localizacao }}" class="form-input" required>
        </div>

        <div class="form-group">
            <label for="descricao"><strong>Descri√ß√£o</strong></label>
            <textarea id="descricao" name="descricao" rows="6" class="form-input" required>{{ problema.descricao }}</textarea>
        </div>

        <div class="form-group">
            <label><strong>Denunciante</strong></label>
            <p style="padding: 0.75rem; background: var(--bg-light); border-radius: 0.5rem; margin: 0;">
                <strong>Nome:</strong> {{ problema.nome_denunciante }}<br>
                <strong>Telefone:</strong> {{ problema.telefone }}<br>
                {% if problema.email %}
                <strong>Email:</strong> {{ problema.email }}
                {% endif %}
            </p>
        </div>

        <div class="form-group">
            <label for="status"><strong>Status</strong></label>
            <select id="status" name="status" class="form-input" required>
                <option value="novo" {% if problema.status == 'novo' %}selected{% endif %}>üÜï Novo</option>
                <option value="em_analise" {% if problema.status == 'em_analise' %}selected{% endif %}>üîç Em An√°lise</option>
                <option value="encaminhado" {% if problema.status == 'encaminhado' %}selected{% endif %}>üì§ Encaminhado</option>
                <option value="resolvido" {% if problema.status == 'resolvido' %}selected{% endif %}>‚úÖ Resolvido</option>
            </select>
        </div>

        <div class="form-group">
            <label for="observacoes_admin"><strong>Observa√ß√µes Internas</strong></label>
            <textarea id="observacoes_admin" name="observacoes_admin" rows="4" class="form-input" placeholder="Anota√ß√µes internas sobre o problema, encaminhamentos, etc.">{{ problema.observacoes_admin or '' }}</textarea>
        </div>

        {% if problema.anexos %}
        <div class="form-group">
            <label><strong>Anexos</strong></label>
            <div style="padding: 0.75rem; background: var(--bg-light); border-radius: 0.5rem;">
                {% for anexo in problema.anexos.split(',') %}
                    <a href="{{ url_for('static', filename=anexo.strip()) }}" target="_blank" style="display: inline-block; margin: 0.25rem; color: #3b82f6;">
                        üìé {{ anexo.strip().split('/')[-1] }}
                    </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <div class="form-actions">
            <button type="submit" class="btn-admin btn-admin-primary">Salvar Altera√ß√µes</button>
            <a href="{{ url_for('admin_problemas_acessibilidade') }}" class="btn-admin btn-admin-secondary">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}

