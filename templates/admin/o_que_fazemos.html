{% extends "admin/base.html" %}

{% block title %}O que fazemos - Gerenciar Servi√ßos{% endblock %}

{% block page_title %}O que fazemos - Gerenciar Servi√ßos{% endblock %}

{% block content %}
<div class="admin-card">
    <div class="admin-card-header">
        <h2 class="admin-card-title">Servi√ßos do M√≥dulo "O que fazemos"</h2>
        <a href="{{ url_for('admin_o_que_fazemos_novo') }}" class="btn-admin btn-admin-primary">
            <span>‚ûï</span> Novo Servi√ßo
        </a>
    </div>
    
    <div style="padding: 1.5rem;">
        <p style="color: #6b7280; margin-bottom: 1.5rem;">
            Gerencie os servi√ßos exibidos no m√≥dulo "O que fazemos" da p√°gina inicial. Os servi√ßos s√£o organizados em 3 colunas.
        </p>
        
        {% if servicos %}
        <div class="admin-table-wrapper">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Coluna</th>
                        <th>Ordem</th>
                        <th>T√≠tulo</th>
                        <th>Cor do √çcone</th>
                        <th>Status</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for servico in servicos %}
                    <tr>
                        <td>
                            <span class="badge badge-secondary">{{ servico.coluna }}</span>
                        </td>
                        <td>{{ servico.ordem }}</td>
                        <td>
                            <strong>{{ servico.titulo }}</strong>
                            <br>
                            <small style="color: #6b7280;">{{ servico.descricao[:50] }}{% if servico.descricao|length > 50 %}...{% endif %}</small>
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: {{ servico.cor_icone }}; border: 2px solid #d1d5db;"></div>
                                <span style="font-family: monospace; font-size: 0.875rem;">{{ servico.cor_icone }}</span>
                            </div>
                        </td>
                        <td>
                            <span class="badge badge-{{ 'success' if servico.ativo else 'secondary' }}">
                                {{ 'Ativo' if servico.ativo else 'Inativo' }}
                            </span>
                        </td>
                        <td>
                            <div style="display: flex; gap: 0.5rem;">
                                <a href="{{ url_for('admin_o_que_fazemos_editar', id=servico.id) }}" 
                                   class="btn-admin btn-admin-edit btn-admin-small">
                                    <span>‚úèÔ∏è</span> Editar
                                </a>
                                <form method="POST" action="{{ url_for('admin_o_que_fazemos_excluir', id=servico.id) }}" 
                                      style="display: inline; margin: 0;"
                                      onsubmit="return confirm('Tem certeza que deseja excluir este servi√ßo?');">
                                    <button type="submit" class="btn-admin btn-admin-danger btn-admin-small">
                                        <span>üóëÔ∏è</span> Excluir
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div style="text-align: center; padding: 3rem; color: #6b7280;">
            <p style="margin: 0 0 1rem 0; font-size: 1.1rem;">Nenhum servi√ßo cadastrado.</p>
            <a href="{{ url_for('admin_o_que_fazemos_novo') }}" class="btn-admin btn-admin-primary">
                <span>‚ûï</span> Criar Primeiro Servi√ßo
            </a>
        </div>
        {% endif %}
    </div>
</div>

<div class="admin-card" style="margin-top: 2rem; background: #fef3c7; border: 2px solid #f59e0b;">
    <div class="admin-card-header">
        <h3 style="color: #92400e; margin: 0;">üí° Dicas</h3>
    </div>
    <div style="padding: 1.5rem;">
        <ul style="margin: 0; padding-left: 1.5rem; color: #92400e;">
            <li>Os servi√ßos s√£o organizados em 3 colunas na p√°gina inicial.</li>
            <li>A ordem dentro de cada coluna √© definida pelo campo "Ordem".</li>
            <li>Use cores diferentes para cada servi√ßo para melhor visualiza√ß√£o.</li>
            <li>O SVG do √≠cone √© opcional - voc√™ pode usar √≠cones SVG personalizados.</li>
            <li>Apenas servi√ßos marcados como "Ativo" ser√£o exibidos na p√°gina inicial.</li>
        </ul>
    </div>
</div>

<div style="margin-top: 1.5rem;">
    <a href="{{ url_for('admin_dados_associacao') }}" class="btn-admin btn-admin-secondary">
        <span>‚Ü©Ô∏è</span> Voltar para Dados da Associa√ß√£o
    </a>
</div>
{% endblock %}

