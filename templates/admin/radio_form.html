{% extends "admin/base.html" %}

{% block title %}{% if programa %}Editar{% else %}Novo{% endif %} Programa de R√°dio{% endblock %}

{% block page_title %}{% if programa %}Editar{% else %}Novo{% endif %} Programa de R√°dio{% endblock %}

{% block content %}
<div class="admin-card">
    <form method="POST" class="admin-form" enctype="multipart/form-data">
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="nome" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                Nome do Programa *
            </label>
            <input type="text" id="nome" name="nome" value="{% if programa %}{{ programa.nome }}{% endif %}" required
                   style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem;">
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="descricao" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                Descri√ß√£o
            </label>
            <textarea id="descricao" name="descricao" rows="4"
                      style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem; font-family: inherit;">{% if programa and programa.descricao %}{{ programa.descricao }}{% endif %}</textarea>
            <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                Descri√ß√£o do programa de r√°dio.
            </small>
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="apresentador" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                Apresentador
            </label>
            <input type="text" id="apresentador" name="apresentador" value="{% if programa and programa.apresentador %}{{ programa.apresentador }}{% endif %}"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem;"
                   placeholder="Nome do apresentador">
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="horario" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                Hor√°rio
            </label>
            <input type="text" id="horario" name="horario" value="{% if programa and programa.horario %}{{ programa.horario }}{% endif %}"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem;"
                   placeholder="Ex: Segunda a Sexta, 14h √†s 16h">
            <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                Hor√°rio de transmiss√£o do programa.
            </small>
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="url_streaming" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                URL de Streaming (Ao Vivo)
            </label>
            <input type="url" id="url_streaming" name="url_streaming" 
                   value="{% if programa and programa.url_streaming %}{{ programa.url_streaming }}{% endif %}"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem;"
                   placeholder="https://exemplo.com/stream.m3u8 ou https://exemplo.com/stream.mp3">
            <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                URL para transmiss√£o ao vivo (streaming). Formatos suportados: MP3, M3U8, etc.
            </small>
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="url_arquivo" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                URL do Arquivo de √Åudio (Epis√≥dio)
            </label>
            <input type="url" id="url_arquivo" name="url_arquivo" 
                   value="{% if programa and programa.url_arquivo %}{{ programa.url_arquivo }}{% endif %}"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem;"
                   placeholder="https://exemplo.com/episodio.mp3">
            <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                URL para arquivo de √°udio do epis√≥dio (opcional). Formatos suportados: MP3, OGG, etc.
            </small>
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="imagem" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                Imagem do Programa
            </label>
            {% if programa and programa.imagem %}
            <div style="margin-bottom: 1rem;">
                <img src="{{ radio_programa_imagem_url(programa) or url_for('static', filename=programa.imagem) }}" 
                     alt="{{ programa.descricao_imagem or 'Imagem atual' }}" 
                     style="max-width: 300px; max-height: 200px; border-radius: 0.5rem; border: 2px solid #d1d5db;">
                <p style="color: var(--text-light); font-size: 0.875rem; margin-top: 0.5rem;">
                    Imagem atual. Selecione uma nova imagem para substituir.
                </p>
            </div>
            {% endif %}
            <input type="file" id="imagem" name="imagem" accept="image/*"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem;">
            <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                Formatos aceitos: PNG, JPG, JPEG, GIF, WEBP. M√°ximo: 16MB.
            </small>
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="descricao_imagem" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                Descri√ß√£o da Imagem
            </label>
            <textarea id="descricao_imagem" 
                      name="descricao_imagem" 
                      rows="3"
                      style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem; font-family: inherit;"
                      placeholder="Descreva o conte√∫do da imagem para facilitar a leitura por leitores de tela.">{{ programa.descricao_imagem if programa and programa.descricao_imagem else '' }}</textarea>
            <small style="display: block; margin-top: 0.5rem; color: #6b7280;">
                Descreva o conte√∫do visual da imagem. Esta descri√ß√£o ser√° usada pelo leitor de √°udio para descrever a imagem aos usu√°rios com defici√™ncia visual.
            </small>
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="ordem" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #374151;">
                Ordem de Exibi√ß√£o
            </label>
            <input type="number" id="ordem" name="ordem" 
                   value="{% if programa %}{{ programa.ordem }}{% else %}0{% endif %}"
                   min="0"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem;">
            <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                N√∫mero para ordenar os programas (menor n√∫mero aparece primeiro).
            </small>
        </div>
        
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" id="ativo" name="ativo" {% if programa and programa.ativo or not programa %}checked{% endif %}
                       style="width: 1.25rem; height: 1.25rem; cursor: pointer;">
                <span style="font-weight: 600; color: #374151;">Programa Ativo</span>
            </label>
            <small style="color: var(--text-light); display: block; margin-top: 0.5rem;">
                Programas inativos n√£o aparecem na p√°gina p√∫blica.
            </small>
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn-admin btn-admin-primary">
                <span>üíæ</span> {% if programa %}Atualizar{% else %}Salvar{% endif %}
            </button>
            <a href="{{ url_for('admin_radio') }}" class="btn-admin btn-admin-secondary">
                <span>‚Ü©Ô∏è</span> Cancelar
            </a>
        </div>
    </form>
</div>
{% endblock %}

